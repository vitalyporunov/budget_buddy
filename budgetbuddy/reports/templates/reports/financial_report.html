{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2 class="text-center">Financial Report</h2>

    <form method="GET" class="row g-3 mb-4">
        <div class="col-md-5">
            <label class="form-label">From:</label>
            <input type="date" name="date_from" class="form-control">
        </div>
        <div class="col-md-5">
            <label class="form-label">To:</label>
            <input type="date" name="date_to" class="form-control">
        </div>
        <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-primary w-100">Filter</button>
        </div>
    </form>

    <h4>Summary</h4>
    <p><strong>Total Income:</strong> ${{ total_income }}</p>
    <p><strong>Total Expenses:</strong> ${{ total_expense }}</p>
    <p><strong>Net Savings:</strong> 
        ${{ total_income|floatformat:2 }} - ${{ total_expense|floatformat:2 }} = 
        ${{ total_income|floatformat:2|add:total_expense|floatformat:2 }}
    </p>


    <h4>Income vs Expenses</h4>
    <img src="data:image/png;base64,{{ pie_chart }}" class="img-fluid shadow">

    <div class="mt-4">
        <a href="{% url 'generate_pdf' %}" class="btn btn-secondary">Download PDF Report</a>
    </div>
</div>
{% endblock %}
